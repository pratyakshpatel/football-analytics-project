STATSBOMB OPEN DATA - PLAYER COMPATIBILITY ANALYSIS GUIDE
=========================================================

## WHAT IS THE DATA?
StatsBomb provides free, detailed football/soccer event data including:
- Match events (passes, shots, tackles, etc.)
- Player lineups and positions
- Tactical formations and substitutions
- Advanced metrics like Expected Goals (xG)

## DATA STRUCTURE:

### 1. COMPETITIONS
- Different leagues (Premier League, La Liga, etc.)
- Multiple seasons available
- Competition IDs for data filtering

### 2. MATCHES
- Individual game information
- Team lineups and formations
- Match metadata (date, venue, score)

### 3. LINEUPS
- Starting XI and substitutes
- Player positions and jersey numbers
- Basic player information

### 4. EVENTS (Most Important for Compatibility)
- Every action in the match timestamped
- Player who performed the action
- Location coordinates (x, y on pitch)
- Outcome success/failure
- Contextual data (pressure, body part used, etc.)

## KEY METRICS FOR PLAYER COMPATIBILITY SCORE:

### TECHNICAL COMPATIBILITY
- Pass accuracy between players
- Successful pass combinations
- Touch quality in tight spaces
- First-touch passing success

### TACTICAL COMPATIBILITY
- Positioning complementarity
- Movement synchronization
- Pressing coordination
- Defensive positioning alignment

### STYLE COMPATIBILITY
- Pass tempo preferences
- Risk-taking tendencies
- Preferred playing zones
- Decision-making speed

### PHYSICAL COMPATIBILITY
- Work rate alignment
- Sprint patterns correlation
- Dueling success rates
- Stamina/intensity matching

## HOW TO BUILD PLAYER COMPATIBILITY SCORE:

### STEP 1: DATA PREPROCESSING
1. Extract player-pair interactions from events
2. Calculate per-game metrics for each player
3. Normalize metrics across different contexts
4. Handle missing data and outliers

### STEP 2: FEATURE ENGINEERING
Create compatibility features:
- Pass success rate between player pairs
- Spatial overlap/complementarity
- Timing of movements and actions
- Shared tactical responsibilities

### STEP 3: SCORING ALGORITHM
Weight different compatibility dimensions:
- Technical: 30% (passing, ball control)
- Tactical: 35% (positioning, movement)
- Style: 20% (tempo, risk preference)
- Physical: 15% (work rate, intensity)

### STEP 4: VALIDATION
- Compare with real-world partnerships
- Analyze successful team combinations
- Cross-validate across different matches

## TECHNOLOGY STACK RECOMMENDATIONS:

### DATA PROCESSING
- **Python**: Primary language for analysis
- **Pandas**: Data manipulation and analysis
- **NumPy**: Numerical computations
- **JSON**: Parsing StatsBomb data format

### MACHINE LEARNING
- **Scikit-learn**: Feature engineering, clustering, regression
- **XGBoost/LightGBM**: Advanced modeling for compatibility prediction
- **TensorFlow/PyTorch**: Deep learning for complex pattern recognition

### VISUALIZATION
- **Matplotlib/Seaborn**: Statistical plots and heatmaps
- **Plotly**: Interactive visualizations
- **mplsoccer**: Football pitch visualizations

### NETWORK ANALYSIS
- **NetworkX**: Analyzing player interaction networks
- **igraph**: Large-scale network computations

### SPATIAL ANALYSIS
- **Scipy**: Spatial statistics and clustering
- **Shapely**: Geometric calculations for pitch zones

## SAMPLE COMPATIBILITY METRICS TO CALCULATE:

### 1. PASSING SYNERGY SCORE
Formula: (Successful_passes_between_players / Total_passes_attempted) * 
         (Average_pass_distance / League_average) * 
         (Pass_under_pressure_success_rate)

### 2. POSITIONAL HARMONY INDEX
Measure how well players complement each other's positions:
- Zone overlap analysis
- Movement correlation
- Spacing optimization

### 3. TEMPO COMPATIBILITY
Compare playing speeds:
- Time between receiving and releasing ball
- Movement frequency and intensity
- Decision-making pace

### 4. RISK ALIGNMENT SCORE
Measure similarity in risk-taking:
- Forward pass percentage
- Dribble attempt frequency
- Shot selection patterns

## IMPLEMENTATION APPROACH:

### PHASE 1: DATA EXPLORATION (Week 1)
- Load and understand StatsBomb data structure
- Identify available competitions and matches
- Extract sample player statistics

### PHASE 2: METRIC DEVELOPMENT (Week 2-3)
- Define compatibility dimensions
- Implement calculation functions
- Create player-pair analysis pipeline

### PHASE 3: MODEL BUILDING (Week 4-5)
- Train machine learning models
- Validate against known successful partnerships
- Fine-tune scoring algorithms

### PHASE 4: APPLICATION DEVELOPMENT (Week 6)
- Build user interface for player comparison
- Create visualization dashboards
- Implement real-time compatibility scoring

## POTENTIAL USE CASES:
1. **Transfer Analysis**: Assess how well a new signing would fit
2. **Formation Optimization**: Find best player combinations
3. **Youth Development**: Identify compatible player partnerships
4. **Tactical Planning**: Predict lineup effectiveness
5. **Performance Analysis**: Understand why certain partnerships work

## CHALLENGES TO CONSIDER:
- Limited sample sizes for some player pairs
- Context dependency (different opponents, game situations)
- Evolution of player styles over time
- Positional flexibility and role changes

## NEXT STEPS:
1. Start with a simple compatibility score using pass data
2. Gradually add more sophisticated metrics
3. Validate with football experts and historical data
4. Build towards a comprehensive compatibility system

## CSV CONVERSION FOR EASIER ANALYSIS:

### WHY CONVERT TO CSV?
- **Spreadsheet Compatibility**: Open in Excel, Google Sheets, LibreOffice
- **Better Visualization**: Easier plotting with tools like Tableau, Power BI
- **Simplified Analysis**: No need to parse complex JSON structures
- **Data Exploration**: Quick filtering, sorting, and aggregation
- **Tool Integration**: Works with R, SPSS, and other statistical software

### CONVERTED DATA STRUCTURE:

#### 1. COMPETITIONS.CSV
- Flattened competition and season information
- Columns: competition_id, competition_name, season_id, season_name, etc.

#### 2. MATCHES.CSV
- All match information in flat structure
- Columns: match_id, match_date, home_team_name, away_team_name, home_score, away_score, etc.
- Includes stadium and referee information

#### 3. LINEUPS.CSV
- Player participation in each match
- Columns: match_id, team_id, player_id, player_name, position_name, jersey_number, etc.
- Multiple rows per player if they change positions

#### 4. EVENTS_BATCH_X.CSV (Multiple Files)
- All match events flattened into tabular format
- Columns: match_id, player_id, type_name, location_x, location_y, pass_recipient_id, etc.
- Separate columns for pass, shot, and other event-specific data

### USING CONVERTED CSV DATA FOR COMPATIBILITY ANALYSIS:

#### QUICK PLAYER STATS CALCULATION:
```sql
-- Example queries you can run on CSV data
SELECT player_name, COUNT(*) as total_passes, 
       AVG(pass_length) as avg_pass_length
FROM events_batch_0 
WHERE type_name = 'Pass' 
GROUP BY player_name;
```

#### PLAYER PAIR ANALYSIS:
```sql
-- Find most frequent pass combinations
SELECT player_name, pass_recipient_name, COUNT(*) as pass_count
FROM events_batch_0 
WHERE type_name = 'Pass' AND pass_recipient_name IS NOT NULL
GROUP BY player_name, pass_recipient_name
ORDER BY pass_count DESC;
```

### CONVERSION SCRIPT FEATURES:
- **Memory Efficient**: Processes events in batches to handle large datasets
- **Comprehensive Flattening**: Extracts nested JSON data into flat columns
- **Data Enrichment**: Adds calculated fields and context information
- **Flexible Processing**: Options to convert specific data types or limit file counts

## DETAILED ATTRIBUTE EXPLANATIONS FOR CSV FILES:

### 1. COMPETITIONS.CSV - Tournament Information
**What it contains**: List of all football tournaments/leagues available in the dataset

- `competition_id`: Unique number identifying each tournament (e.g., 2 = Premier League)
- `season_id`: Unique number for each season (e.g., 27 = 2019/20 season)
- `competition_name`: Full name of the tournament (e.g., "Premier League", "La Liga")
- `season_name`: The year range of the season (e.g., "2019/2020")
- `country_name`: Which country the league is from (e.g., "England", "Spain")
- `competition_gender`: Whether it's men's or women's football
- `competition_youth`: True/False if it's a youth competition
- `competition_international`: True/False if it's international (like World Cup)

**Simple explanation**: Think of this as a catalog of all the different football leagues and seasons you can analyze.

### 2. MATCHES.CSV - Individual Game Information
**What it contains**: Details about every single football match in the dataset

#### Basic Match Info:
- `match_id`: Unique number for each game (like a game's fingerprint)
- `match_date`: When the game was played (YYYY-MM-DD format)
- `kick_off`: What time the game started (HH:MM:SS format)
- `match_week`: Which week of the season this game was in
- `match_status`: Whether the game finished normally or had issues

#### Competition Details:
- `competition_id` & `competition_name`: Which tournament this match was part of
- `season_id` & `season_name`: Which season this match was in

#### Team Information:
- `home_team_id` & `home_team_name`: The team playing at their home stadium
- `away_team_id` & `away_team_name`: The visiting team
- `home_score` & `away_score`: Final score of the match

#### Venue & Officials:
- `stadium_id` & `stadium_name`: Where the game was played
- `referee_id` & `referee_name`: Who was the main referee

**Simple explanation**: This is like a scoreboard and program for every game, telling you who played, when, where, and what the result was.

### 3. LINEUPS.CSV - Player Participation
**What it contains**: Which players participated in each match and in what positions

#### Match & Team Context:
- `match_id`: Links to the specific game in matches.csv
- `team_id` & `team_name`: Which team the player was on
- `player_id`: Unique identifier for each player (stays same across all games)
- `player_name`: Full name of the player
- `player_nickname`: Common nickname if they have one
- `jersey_number`: What number was on their shirt for this game

#### Player Background:
- `country_id` & `country_name`: Which country the player is from

#### Position Information (can have multiple positions per player):
- `position_1_id` & `position_1_name`: First position they played (e.g., "Center Back")
- `position_1_from` & `position_1_to`: When they started/stopped playing this position (minutes)
- `position_1_from_period` & `position_1_to_period`: Which half of the game (1st or 2nd half)
- Similar fields for `position_2`, `position_3`, etc. if player changed positions

**Simple explanation**: This tells you exactly which players were in each game and where they played on the field. It's like the team sheet you get at a stadium.

### 4. EVENTS_BATCH_X.CSV - Every Action in the Game
**What it contains**: Every single thing that happened during matches (passes, shots, tackles, etc.)

#### Basic Event Information:
- `match_id`: Which game this action happened in
- `id`: Unique identifier for this specific action
- `index`: Order of events in the match (1st event, 2nd event, etc.)
- `period`: Which part of the game (1=first half, 2=second half, 3=extra time, etc.)
- `timestamp`: Exact time when the action happened (MM:SS.milliseconds)
- `minute` & `second`: Easier to read time format

#### What Happened:
- `type_id` & `type_name`: What kind of action it was (e.g., "Pass", "Shot", "Tackle")
- `duration`: How long the action took (in seconds)

#### Who Did It:
- `player_id` & `player_name`: Which player performed the action
- `team_id` & `team_name`: Which team the player was on
- `position_id` & `position_name`: What position the player was playing

#### Where It Happened:
- `location_x` & `location_y`: Coordinates on the field (x=left-right, y=up-down)
  - Field is 120 units long, 80 units wide
  - (0,0) is bottom-left corner, (120,80) is top-right corner
- `under_pressure`: True/False if player was being pressured by opponent
- `off_camera`: True/False if action happened outside camera view
- `out`: True/False if ball went out of bounds

#### Game Context:
- `possession`: Which team had control of the ball
- `possession_team_id` & `possession_team_name`: Which team was in possession
- `play_pattern_id` & `play_pattern_name`: How the play started (e.g., "Regular Play", "Free Kick")

#### PASS-SPECIFIC ATTRIBUTES (only filled when type_name = "Pass"):
- `pass_recipient_id` & `pass_recipient_name`: Who received the pass
- `pass_length`: How far the ball traveled (in yards/meters)
- `pass_angle`: Direction of the pass (in radians, -π to π)
- `pass_height_id` & `pass_height_name`: How high the ball was ("Ground Pass", "High Pass", "Low Pass")
- `pass_end_location_x` & `pass_end_location_y`: Where the ball ended up
- `pass_body_part_id` & `pass_body_part_name`: What body part was used ("Left Foot", "Right Foot", "Head")
- `pass_type_id` & `pass_type_name`: Special type of pass ("Cross", "Through Ball", "Free Kick", etc.)
- `pass_outcome_id` & `pass_outcome_name`: What happened to the pass ("Complete", "Incomplete", "Out", etc.)

#### SHOT-SPECIFIC ATTRIBUTES (only filled when type_name = "Shot"):
- `shot_statsbomb_xg`: Expected Goals value (0.0 to 1.0, higher = better chance to score)
- `shot_end_location_x`, `shot_end_location_y`, `shot_end_location_z`: Where the shot ended up
  - z-coordinate is height (ground level = 0, goal height = 2.67)
- `shot_technique_id` & `shot_technique_name`: How the shot was taken ("Normal", "Volley", "Header")
- `shot_outcome_id` & `shot_outcome_name`: What happened ("Goal", "Saved", "Off T", "Blocked")
- `shot_type_id` & `shot_type_name`: Type of shot ("Open Play", "Penalty", "Free Kick")
- `shot_body_part_id` & `shot_body_part_name`: What body part was used

**Simple explanation**: This is like a super-detailed play-by-play commentary of everything that happened in the game, with exact locations and timing.

## HOW TO USE THESE ATTRIBUTES FOR PLAYER COMPATIBILITY:

### FOR TECHNICAL COMPATIBILITY:
- Use `pass_outcome_name` to calculate pass success rates between players
- Compare `pass_length` and `pass_angle` to see if players have similar passing styles
- Look at `pass_body_part_name` to see if players prefer same foot
- Analyze `shot_statsbomb_xg` to compare shooting quality

### FOR TACTICAL COMPATIBILITY:
- Use `location_x` and `location_y` to see where players operate on the field
- Compare `position_name` to see if players complement each other positionally
- Look at `under_pressure` events to see how players handle pressure
- Analyze `play_pattern_name` to see what situations players excel in

### FOR STYLE COMPATIBILITY:
- Calculate time between events (`timestamp` differences) to measure playing tempo
- Look at `pass_type_name` distribution to see risk-taking preferences
- Compare `duration` of actions to see decision-making speed
- Analyze event `type_name` frequency to understand player roles

### FOR PHYSICAL COMPATIBILITY:
- Use location data to calculate distance covered and movement patterns
- Look at `minute` and `second` to see when players are most active
- Analyze `period` data to see stamina patterns
- Compare event frequency across different game periods

**Simple analogy**: Think of the events data like a GPS tracker that also records every touch of the ball - it tells you exactly where every player was, what they did, and when they did it throughout the entire game.
